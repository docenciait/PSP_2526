# 2.4 Anexo I - Propiedades del sistema y programación en consola

## I.1 Propiedades del sistema y comandos del sistema

Si desarrollamos aplicaciones para diferentes sistemas operativos (SO), debemos considerar las diferencias en su funcionamiento.

### Separador de archivos

- **UNIX:** `/`
- **Windows:** `\`

Para que las aplicaciones sean independientes del SO, usamos las propiedades del sistema con `System.getProperty(String propName)`:

```java
String separator = System.getProperty("file.separator");
```

También se puede modificar con el parámetro de ejecución:

```
-Dfile.separator
```

> **Nota:** Es recomendable usar `/` en las rutas, ya que Java las adapta al sistema.

### Ejecución de comandos del SO

Para ejecutar comandos, debemos hacerlo a través del shell del sistema:

```java
String homeDirectory = System.getProperty("user.home");
boolean isWindows = System.getProperty("os.name").toLowerCase().startsWith("windows");

if (isWindows) {
    Runtime.getRuntime().exec(String.format("cmd.exe /c dir %s", homeDirectory));
} else {
    Runtime.getRuntime().exec(String.format("sh -c ls %s", homeDirectory));
}
```

El modificador `c` abre el shell, ejecuta el comando y cierra el proceso.

#### Ejemplo: Abrir una página en el navegador desde una app gráfica

```java
public void mouseClicked(MouseEvent e) {
    try {
        // Linux version
        Runtime.getRuntime().exec("open http://localhost:8153/go");
        // Windows version
        // Runtime.getRuntime().exec("explorer http://localhost:8153/go");
    } catch (IOException e1) {
        // Don't care
    }
}
```

### Propiedades del sistema

**Actividad:** Usando métodos de las clases `System` y `Runtime`, haz un programa que muestre:

- Todas las propiedades del sistema operativo y sus valores.
- Memoria total, memoria libre, memoria en uso y procesadores disponibles.

Consulta los métodos de las clases `Runtime` y `System` para recorrer y mostrar las propiedades.

---

## I.2 Formato de salida por consola

### Codificación de caracteres

La codificación depende del SO:

- **GNU/Linux, Mac OS, Android, iOS:** UTF-8 (Unicode)
- **MS Windows:** Windows-1252 (incompatible con UTF-8)

En Java, para manejar correctamente la codificación:

```java
// Obtener la codificación por defecto
System.out.println(System.getProperty("file.encoding"));

// Establecer la codificación
System.setProperty("file.encoding", "UTF-8");

// Leer con codificación específica
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in, "UTF-8"));

// Escribir con codificación específica
PrintWriter writer = new PrintWriter(new OutputStreamWriter(System.out, "UTF-8"));

// Entrada estándar con codificación
Scanner scanner = new Scanner(System.in, "UTF-8");

// Salida estándar con codificación
System.out.println(new String("Hello, World!".getBytes("UTF-8")));
```

---

### Salida por consola

Para imprimir en consola:

```java
System.out.println("¡Hola, Mundo!");
```

### Entrada por consola

Para leer de la consola:

```java
Scanner scanner = new Scanner(System.in);
String nombre = scanner.nextLine();
```

---

### Formato de cadena

Para formatear la salida:

```java
String.format("El valor de PI es %.2f", Math.PI);
```

---

### Formato numérico

#### Usando `NumberFormat` y `DecimalFormat`

```java
DecimalFormat numberFormat = new DecimalFormat("#.00");
// Si usamos hashes en vez de ceros permitimos que .30 se vea como 0.3
System.out.println(numberFormat.format(number));
```

#### Usando `System.out.printf`

```java
System.out.printf("\n$%10.2f", shippingCost); // Justifica a la derecha con hasta 10 posiciones
System.out.printf("%n$%.2f", shippingCost);
```

---

### Uso de colores en la salida por consola

Ejemplo de código para mostrar colores en la consola:

```java
public class UsarColoresEnConsola {
    public static final String ANSI_RESET = "\u001B[0m";
    public static final String ANSI_BLACK = "\u001B[30m";
    public static final String ANSI_RED = "\u001B[31m";
    public static final String ANSI_GREEN = "\u001B[32m";
    public static final String ANSI_YELLOW = "\u001B[33m";
    public static final String ANSI_BLUE = "\u001B[34m";
    public static final String ANSI_PURPLE = "\u001B[35m";
    public static final String ANSI_CYAN = "\u001B[36m";
    public static final String ANSI_WHITE = "\u001B[37m";

    public static final String ANSI_BLACK_BACKGROUND = "\u001B[40m";
    public static final String ANSI_RED_BACKGROUND = "\u001B[41m";
    public static final String ANSI_GREEN_BACKGROUND = "\u001B[42m";
    public static final String ANSI_YELLOW_BACKGROUND = "\u001B[43m";
    public static final String ANSI_BLUE_BACKGROUND = "\u001B[44m";
    public static final String ANSI_PURPLE_BACKGROUND = "\u001B[45m";
    public static final String ANSI_CYAN_BACKGROUND = "\u001B[46m";
    public static final String ANSI_WHITE_BACKGROUND = "\u001B[47m";

    public static void main(String[] args) {
        System.out.println(ANSI_GREEN + ANSI_WHITE_BACKGROUND + "Hola"
            + ANSI_BLUE + ANSI_YELLOW_BACKGROUND + " Adiós" + ANSI_RESET);
    }
}
```
